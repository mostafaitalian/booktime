!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){var r,i,o;!function(s,a){i=[t,n(1)],r=a,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t,e){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(e);t.exports=n.default})},function(t,e,n){var r,i,o;!function(n,s){i=[e],r=s,void 0!==(o="function"==typeof r?r.apply(e,i):r)&&(t.exports=o)}(0,function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r){var i=this;n(this,t),this._eventSource=null,this._lastEventId=null,this._timer=null,this._listeners={},this.url=e,this.readyState=0,this.max_retry_time=r.max_retry_time||3e3,this._configuration=null!=r?Object.assign({},r):null,null!=this._configuration&&this._configuration.lastEventId&&(this._lastEventId=this._configuration.lastEventId,delete this._configuration.lastEventId),this._onevent_wrapped=function(t){i._onevent(t)},this._start()}return r(t,[{key:"_start",value:function(){var t=this,e=this.url;this._lastEventId&&(-1===e.indexOf("?")?e+="?":e+="&",e+="lastEventId="+encodeURIComponent(this._lastEventId)),this._eventSource=new EventSource(e,this._configuration),this._eventSource.onopen=function(e){t._onopen(e)},this._eventSource.onerror=function(e){t._onerror(e)};var n=!0,r=!1,i=void 0;try{for(var o,s=Object.keys(this._listeners)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;this._eventSource.addEventListener(a,this._onevent_wrapped)}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}}},{key:"_onopen",value:function(t){0===this.readyState&&(this.readyState=1,this.onopen(t))}},{key:"_onerror",value:function(t){var e=this;if(1===this.readyState&&(this.readyState=0,this.onerror(t)),this._eventSource&&2===this._eventSource.readyState){this._eventSource.close(),this._eventSource=null;var n=Math.round(this.max_retry_time*Math.random());this._timer=setTimeout(function(){return e._start()},n)}}},{key:"_onevent",value:function(t){t.lastEventId&&(this._lastEventId=t.lastEventId);var n=this._listeners[t.type];if(null!=n)for(var r=[].concat(e(n)),i=0;i<r.length;i++){var o=r[i];o(t)}"message"===t.type&&this.onmessage(t)}},{key:"onopen",value:function(t){}},{key:"onerror",value:function(t){}},{key:"onmessage",value:function(t){}},{key:"close",value:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._eventSource&&(this._eventSource.close(),this._eventSource=null),this.readyState=2}},{key:"addEventListener",value:function(t,n){var r=t.toString();r in this._listeners||(this._listeners[r]=[],this._eventSource&&this._eventSource.addEventListener(r,this._onevent_wrapped));var i=this._listeners[r];i.includes(n)||(this._listeners[r]=[].concat(e(i),[n]))}},{key:"removeEventListener",value:function(t,e){var n=t.toString();if(n in this._listeners){var r=this._listeners[n],i=r.filter(function(t){return t!==e});i.length>0?this._listeners[n]=i:(delete this._listeners[n],this._eventSource&&this._eventSource.removeEventListener(n,this._onevent_wrapped))}}}]),t}();t.default=i})}]);